# .htaccess for Next.js static export with clean URLs

# Enable rewrite engine
RewriteEngine On
RewriteBase /

# Directory index
DirectoryIndex index.html

# Disable directory browsing
Options -Indexes

# Prevent rewrite loops
RewriteCond %{ENV:REDIRECT_STATUS} ^$

# Remove trailing slash (except for root)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} (.+)/$
RewriteRule ^ %1 [R=301,L]

# Handle /services/ directory -> services.html
RewriteCond %{REQUEST_URI} ^/services/?$
RewriteRule ^ /services.html [L]

# Handle /blog/ directory -> blog.html
RewriteCond %{REQUEST_URI} ^/blog/?$
RewriteRule ^ /blog.html [L]

# Handle clean URLs - add .html if file exists
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteCond %{REQUEST_URI} !\.html$
RewriteRule ^(.*)$ $1.html [L]

# If nothing matches and it's not a file, let Apache handle 404
# This prevents 500 errors from rewrite rules

# Error pages
ErrorDocument 404 /404.html
ErrorDocument 403 /404.html
ErrorDocument 500 /404.html
